<!-- components/layout/team-navbar.html -->
<nav class="bg-white/80 dark:bg-gray-900/80 backdrop-blur-lg border-b border-gray-200/30 dark:border-gray-700/30 fixed top-0 left-0 right-0 z-50 transition-colors duration-300" id="navbar">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <div class="flex items-center justify-between h-16">

            <!-- Left Section: Logo -->
            <div class="flex-shrink-0">
                <a href="../index.html" class="flex items-center text-xl font-bold text-gray-800 dark:text-white title-font">
                    <i class="fas fa-pen-fancy text-indigo-600 dark:text-indigo-400 text-2xl mr-2"></i>
                    <span>TechBlog</span>
                </a>
            </div>

            <!-- Center Section: Desktop Navigation Links -->
            <div class="hidden md:flex flex-grow justify-center">
                <div class="flex items-baseline space-x-8">
                    <a href="../index.html" class="nav-link text-gray-600 hover:text-gray-900 dark:text-gray-300 dark:hover:text-white px-3 py-2 rounded-md text-base font-medium">
                        <i class="fas fa-home mr-1 opacity-80"></i>首页
                    </a>
                    <a href="../articles.html" class="nav-link text-gray-600 hover:text-gray-900 dark:text-gray-300 dark:hover:text-white px-3 py-2 rounded-md text-base font-medium">
                        <i class="fas fa-book-open mr-1 opacity-80"></i>文章
                    </a>
                    <a href="../index.html#categories-section" class="nav-link text-gray-600 hover:text-gray-900 dark:text-gray-300 dark:hover:text-white px-3 py-2 rounded-md text-base font-medium">
                        <i class="fas fa-tags mr-1 opacity-80"></i>分类
                    </a>
                    <a href="#" class="nav-link text-indigo-600 dark:text-indigo-400 hover:text-indigo-800 dark:hover:text-indigo-300 px-3 py-2 rounded-md text-base font-medium">
                        <i class="fas fa-users mr-1 opacity-80"></i>第十二组-开发团队
                    </a>
                    <a href="../index.html#contact" class="nav-link text-gray-600 hover:text-gray-900 dark:text-gray-300 dark:hover:text-white px-3 py-2 rounded-md text-base font-medium">
                        <i class="fas fa-envelope mr-1 opacity-80"></i>联系我们
                    </a>
                </div>
            </div>

            <!-- Right Section: Search, Theme, User, Mobile Menu -->
            <div class="flex items-center space-x-4">
                <!-- Search (Optional: Hidden on small screens if needed) -->
                <div class="relative hidden sm:block">
                     <input type="text" placeholder="搜索..." class="w-48 lg:w-64 px-4 py-1.5 rounded-full bg-gray-100 dark:bg-gray-800 border-transparent focus:border-indigo-500 focus:ring-1 focus:ring-indigo-500 text-sm transition">
                     <button class="absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300">
                         <i class="fas fa-search text-xs"></i>
                     </button>
                </div>

                <!-- Demo Button (New) -->
                <button id="demo-button" class="hidden md:flex items-center justify-center px-6 py-1.5 bg-gradient-to-r from-indigo-500 to-purple-600 text-white rounded-full text-sm font-medium transform hover:scale-105 transition-all demo-btn-effect" onclick="triggerDemoAnimation()">
                    <i class="fas fa-rocket"></i><span class="ml-2">演示</span>
                </button>

                <!-- Settings Button (New) -->
                <button id="settings-button" class="hidden md:block p-2 rounded-full bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-300 dark:hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-gray-100 dark:focus:ring-offset-gray-800 focus:ring-indigo-500">
                    <span class="sr-only">设置</span>
                    <i class="fas fa-cog"></i>
                </button>
                <!-- Settings Dropdown -->
                <div id="settings-dropdown" class="hidden origin-top-right absolute right-14 top-16 mt-2 w-56 rounded-md shadow-lg bg-white dark:bg-gray-800 ring-1 ring-black ring-opacity-5 focus:outline-none z-50" role="menu">
                    <div class="py-1">
                        <div class="px-4 py-2 text-sm text-gray-700 dark:text-gray-200 border-b border-gray-200 dark:border-gray-700">
                            <span class="font-medium">显示设置</span>
                        </div>
                        <button id="toggle-animation-mode" class="w-full text-left block px-4 py-2 text-sm text-gray-700 dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-700" role="menuitem">
                            <i class="fas fa-fire-alt mr-2 text-indigo-500"></i>
                            <span id="animation-mode-text">切换到标准模式</span>
                        </button>
                        <button class="w-full text-left block px-4 py-2 text-sm text-gray-700 dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-700" role="menuitem">
                            <i class="fas fa-adjust mr-2 text-indigo-500"></i>
                            <span>明暗模式切换</span>
                        </button>
                    </div>
                </div>

                <!-- Profile dropdown -->
                <div class="relative hidden md:block">
                    <button id="user-menu" class="flex text-sm bg-gray-200 dark:bg-gray-700 rounded-full focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-gray-100 dark:focus:ring-offset-gray-800 focus:ring-indigo-500" aria-expanded="false" aria-haspopup="true">
                        <span class="sr-only">Open user menu</span>
                        <div class="h-8 w-8 rounded-full overflow-hidden">
                            <img class="h-full w-full object-cover" src="https://randomuser.me/api/portraits/men/32.jpg" alt="用户头像">
                        </div>
                    </button>
                    <!-- Dropdown menu -->
                    <div id="dropdown-menu" class="hidden origin-top-right absolute right-0 mt-2 w-48 rounded-md shadow-lg py-1 bg-white dark:bg-gray-800 ring-1 ring-black ring-opacity-5 focus:outline-none" role="menu" aria-orientation="vertical" aria-labelledby="user-menu">
                        <a href="#" class="block px-4 py-2 text-sm text-gray-700 dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-700" role="menuitem">个人资料</a>
                        <a href="#" class="block px-4 py-2 text-sm text-gray-700 dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-700" role="menuitem">设置</a>
                        <a href="#" class="block px-4 py-2 text-sm text-gray-700 dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-700" role="menuitem">退出</a>
                    </div>
                </div>

                 <!-- Mobile menu button -->
                 <div class="flex items-center md:hidden">
                    <button id="mobile-menu-button" type="button" class="inline-flex items-center justify-center p-2 rounded-md text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-white hover:bg-gray-100 dark:hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-inset focus:ring-indigo-500" aria-controls="mobile-menu" aria-expanded="false">
                        <span class="sr-only">Open main menu</span>
                        <i class="fas fa-bars text-xl"></i>
                    </button>
                 </div>

            </div> <!-- End Right Section -->
        </div> <!-- End Flex Container -->
    </div> <!-- End Max Width Container -->

    <!-- Mobile menu, show/hide based on menu state. -->
    <div class="hidden md:hidden" id="mobile-menu">
        <div class="px-2 pt-2 pb-3 space-y-1 sm:px-3">
            <a href="../index.html" class="mobile-menu-item">
                <i class="fas fa-home"></i><span>首页</span>
            </a>
            <a href="../articles.html" class="mobile-menu-item">
                <i class="fas fa-book-open"></i><span>文章</span>
            </a>
            <a href="../index.html#categories-section" class="mobile-menu-item">
                <i class="fas fa-tags"></i><span>分类</span>
            </a>
            <a href="#" class="mobile-menu-item active">
                <i class="fas fa-users"></i><span>第十二组-开发团队</span>
            </a>
            <a href="../index.html#contact" class="mobile-menu-item">
                <i class="fas fa-envelope"></i><span>联系我们</span>
            </a>
            <!-- 添加移动端演示按钮 -->
            <a href="javascript:void(0);" id="mobile-demo-button" class="mobile-menu-item bg-gradient-to-r from-indigo-500 to-purple-600 text-white" onclick="if(typeof triggerDemoAnimation === 'function') { triggerDemoAnimation(); } else { console.error('triggerDemoAnimation函数未定义'); }">
                <i class="fas fa-rocket"></i><span>演示</span>
            </a>
        </div>
        <!-- Mobile User Profile (Optional) -->
        <div class="pt-4 pb-3 border-t border-gray-200 dark:border-gray-700">
            <div class="mt-3 px-2 space-y-1">
                <a href="#" class="block rounded-md px-3 py-2 text-base font-medium text-gray-500 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700 hover:text-gray-800 dark:hover:text-white">个人资料</a>
                <a href="#" class="block rounded-md px-3 py-2 text-base font-medium text-gray-500 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700 hover:text-gray-800 dark:hover:text-white">设置</a>
                <a href="#" class="block rounded-md px-3 py-2 text-base font-medium text-gray-500 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700 hover:text-gray-800 dark:hover:text-white">退出</a>
            </div>
        </div>
    </div>
</nav>

<style>
/* Styles for theme buttons (copied from previous version for consistency) */
.theme-button {
    @apply p-1 mr-1 rounded-full transition-transform duration-200 hover:scale-110 focus:outline-none w-6 h-6 flex items-center justify-center border-2 border-transparent; /* Fixed size, added mr-1 */
}
.theme-button:last-child {
    @apply mr-0; /* Remove margin from last button */
}
.theme-button.active {
     @apply ring-2 ring-offset-2 ring-offset-gray-100 dark:ring-offset-gray-800 ring-indigo-500 scale-110;
}
.dark-mode-toggle {
     @apply bg-gray-200 dark:bg-gray-600;
}
.dark-mode-toggle i {
    transition: color 0.3s ease;
    font-size: 1rem; /* Adjusted icon size */
    color: #6b7280; /* Default light mode icon color */
}
.dark-mode-toggle.active i {
    color: #fcd34d; /* Dark mode active icon color (sun) */
}

/* Mobile menu item base style */
.mobile-menu-item {
    @apply block rounded-md px-3 py-2 text-base font-medium text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 hover:text-gray-900 dark:hover:text-white flex items-center;
}
.mobile-menu-item i {
    @apply mr-3 opacity-80;
}
/* Active mobile menu item style (Example) */
.mobile-menu-item.active {
     @apply bg-indigo-50 dark:bg-gray-700 text-indigo-700 dark:text-white;
}

/* 添加团队页面特有的导航栏特效 */
.nav-link {
    position: relative;
    white-space: nowrap; 
}
.nav-link::after {
    content: '';
    position: absolute;
    width: 0;
    height: 2px;
    bottom: -4px; 
    left: 50%;
    transform: translateX(-50%);
    background-color: var(--color-primary, #6366f1); 
    transition: width 0.3s ease;
}
.nav-link:hover::after, .nav-link.active::after {
    width: 80%; 
}
/* 当前页面的导航项激活状态 */
.nav-link.active::after {
    width: 80%;
}

/* 演示按钮特效 */
.demo-btn-effect {
    position: relative;
    overflow: hidden;
    box-shadow: 0 0 15px rgba(99, 102, 241, 0.5);
    width: 100px; /* 设定宽度使其成为横向椭圆形 */
    height: 36px; /* 固定高度 */
    border-radius: 18px; /* 圆角设置为高度的一半，确保是椭圆形 */
    display: flex;
    align-items: center;
    justify-content: center;
}

/* 闪光效果 */
.demo-btn-effect::before {
    content: '';
    position: absolute;
    top: -50%;
    left: -50%;
    width: 200%;
    height: 200%;
    background: linear-gradient(
        to bottom right, 
        rgba(255, 255, 255, 0) 0%,
        rgba(255, 255, 255, 0.1) 100%
    );
    transform: rotate(45deg);
    animation: shimmer 3s infinite;
}

@keyframes shimmer {
    0% {
        transform: translateX(-100%) rotate(45deg);
    }
    100% {
        transform: translateX(100%) rotate(45deg);
    }
}

/* 设置按钮样式 */
#settings-button {
    transition: all 0.3s ease;
}

#settings-button:hover {
    transform: rotate(45deg);
}

/* 演示动画元素 */
.demo-animation-element {
    position: fixed;
    z-index: 9999;
    pointer-events: none;
}

/* 添加铃铛震动动画 */
@keyframes bell-shake {
    0% { transform: rotate(0); }
    15% { transform: rotate(15deg); }
    30% { transform: rotate(-15deg); }
    45% { transform: rotate(12deg); }
    60% { transform: rotate(-12deg); }
    75% { transform: rotate(6deg); }
    85% { transform: rotate(-6deg); }
    92% { transform: rotate(3deg); }
    100% { transform: rotate(0); }
}

.animate-bell {
    animation: bell-shake 1s cubic-bezier(0.36, 0.07, 0.19, 0.97) both;
    transform-origin: top center;
}

/* 通知面板动画 */
#notification-panel {
    transition: opacity 0.3s ease, transform 0.3s ease;
    box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
}

/* 通知徽章样式 */
.notification-badge {
    font-size: 0.6rem;
    line-height: 0.6rem;
    transition: all 0.3s ease;
}

/* Toast 消息样式 */
.toast-message {
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
    transition: all 0.3s ease;
}
</style>

<script>
// 添加到页面底部或适当的脚本区域
document.addEventListener('DOMContentLoaded', function() {
    // 设置按钮点击事件
    const settingsButton = document.getElementById('settings-button');
    const settingsDropdown = document.getElementById('settings-dropdown');
    
    if (settingsButton && settingsDropdown) {
        settingsButton.addEventListener('click', function(e) {
            e.stopPropagation();
            settingsDropdown.classList.toggle('hidden');
        });
        
        // 点击页面其他地方关闭下拉菜单
        document.addEventListener('click', function() {
            if (!settingsDropdown.classList.contains('hidden')) {
                settingsDropdown.classList.add('hidden');
            }
        });
        
        // 阻止下拉菜单内的点击事件冒泡
        settingsDropdown.addEventListener('click', function(e) {
            e.stopPropagation();
        });
    }
    
    // 动画模式切换
    const toggleAnimationButton = document.getElementById('toggle-animation-mode');
    const animationModeText = document.getElementById('animation-mode-text');
    
    if (toggleAnimationButton && animationModeText) {
        // 检查当前状态
        const isAnimationDisabled = localStorage.getItem('disableThreeEffects') === 'true';
        animationModeText.textContent = isAnimationDisabled ? '切换到动画模式' : '切换到标准模式';
        
        toggleAnimationButton.addEventListener('click', function() {
            const currentSetting = localStorage.getItem('disableThreeEffects') === 'true';
            localStorage.setItem('disableThreeEffects', !currentSetting);
            
            // 提示用户刷新页面
            const message = document.createElement('div');
            message.style.cssText = `
                position: fixed;
                top: 50%;
                left: 50%;
                transform: translate(-50%, -50%);
                background: rgba(0,0,0,0.8);
                color: white;
                padding: 20px;
                border-radius: 10px;
                text-align: center;
                z-index: 10000;
            `;
            message.innerHTML = `
                <p>显示模式已更改</p>
                <p>正在刷新页面应用新设置...</p>
            `;
            document.body.appendChild(message);
            
            // 短暂延迟后刷新页面
            setTimeout(() => {
                window.location.reload();
            }, 1000);
        });
    }

    // 点击页面其他地方关闭通知面板
    document.addEventListener('click', function(e) {
        const notificationPanel = document.getElementById('notification-panel');
        const notificationBell = document.getElementById('notification-bell');
        
        if (notificationPanel && !notificationPanel.classList.contains('hidden') && 
            !notificationPanel.contains(e.target) && !notificationBell.contains(e.target)) {
            console.log('点击了页面其他区域，关闭通知面板');
            notificationPanel.classList.add('hidden');
        }
    });
});
</script> 