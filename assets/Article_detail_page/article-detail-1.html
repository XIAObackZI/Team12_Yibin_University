<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>文章详情 - 深度解析交互设计趋势</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600;700&family=Open+Sans:wght@400;600&family=Playfair+Display:wght@400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="../../styles/main.css">
    <link rel="stylesheet" href="../../styles/components.css">
    <link rel="stylesheet" href="../../styles/animations.css">
    <link rel="stylesheet" href="../../styles/themes.css">
    <style>
        .article-content p {
            margin-bottom: 1.5rem;
            line-height: 1.8;
        }
        
        .article-content h2 {
            font-size: 1.5rem;
            font-weight: bold;
            margin: 2rem 0 1rem;
            color: #2d3748;
            border-left: 4px solid #4f46e5;
            padding-left: 1rem;
        }
        
        .article-content img {
            border-radius: 0.5rem;
            margin: 1.5rem auto;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
            max-width: 100%;
            height: auto;
        }
        
        .like-btn:hover .like-icon {
            transform: scale(1.2);
        }
        
        .like-btn.liked .like-icon {
            color: #ef4444;
        }
        
        .bookmark-btn:hover .bookmark-icon {
            transform: scale(1.2);
        }
        
        .bookmark-btn.bookmarked .bookmark-icon {
            color: #f59e0b;
        }
        
        .comment-item:hover {
            background-color: #f8fafc;
        }
        
        .tag:hover {
            transform: translateY(-2px);
        }
        
        .author-avatar:hover {
            transform: scale(1.05);
        }
        
        .progress-bar {
            height: 4px;
            background: #e2e8f0;
            position: fixed;
            top: 0;
            left: 0;
            z-index: 100;
        }
        
        .progress {
            height: 100%;
            background: #4f46e5;
            width: 0%;
        }
        
        @keyframes pulse {
            0%, 100% {
                opacity: 1;
            }
            50% {
                opacity: 0.5;
            }
        }
        
        .animate-pulse {
            animation: pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;
        }
    </style>
</head>
<body class="bg-gray-50" style="font-family: 'Open Sans', sans-serif; background-color: #f5f7fa; color: var(--dark); padding-top: 5rem;">
    <!-- 阅读进度条 -->
    <div class="progress-bar w-full">
        <div class="progress" id="progressBar"></div>
    </div>

    <!-- 导航栏容器 -->
    <div id="navbar-container"></div>

    <!-- 主要内容区 -->
    <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
        <!-- 文章标题和元信息 -->
        <div class="mb-8">
            <div class="flex items-center space-x-2 mb-4">
                <span class="bg-indigo-100 text-indigo-800 text-xs font-medium px-2.5 py-0.5 rounded">交互设计</span>
                <span class="text-gray-500 text-sm">12分钟阅读</span>
            </div>
            <h1 class="text-3xl md:text-4xl font-bold text-gray-900 mb-4">2024年交互设计趋势深度解析：从微交互到沉浸式体验</h1>
            
            <div class="flex items-center justify-between mb-6">
                <div class="flex items-center space-x-3">
                    <img src="https://randomuser.me/api/portraits/women/68.jpg" alt="作者头像" class="w-10 h-10 rounded-full cursor-pointer author-avatar transition-transform duration-300">
                    <div>
                        <p class="font-medium text-gray-900">张雨薇</p>
                        <p class="text-sm text-gray-500">UX设计师 | 5年经验</p>
                    </div>
                </div>
                <div class="flex items-center space-x-4">
                    <span class="text-gray-500 text-sm">发布于 2024年10月15日</span>
                    <button class="text-gray-500 hover:text-indigo-600">
                        <i class="fas fa-share-alt"></i>
                    </button>
                </div>
            </div>
        </div>

        <!-- 文章封面图 -->
        <div class="mb-8 rounded-xl overflow-hidden shadow-lg">
            <img src="https://images.unsplash.com/photo-1551288049-bebda4e38f71?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1470&q=80" alt="文章封面" class="w-full h-auto">
        </div>

        <!-- 文章内容 -->
        <div class="bg-white rounded-xl shadow-sm p-6 md:p-8 mb-8 article-content">
            <p class="text-gray-700 mb-6">在数字化体验日益丰富的今天，交互设计已经成为了产品成功的关键因素之一。2023年，我们见证了从微交互到沉浸式体验的全面进化，这些趋势不仅改变了用户与产品的互动方式，也重新定义了用户体验的标准。</p>
            
            <h2>1. 微交互的精细化设计</h2>
            <p class="text-gray-700">微交互是指产品中那些细微的、通常被忽视的交互瞬间，如下拉刷新时的动画、按钮点击的反馈、表单输入的验证等。2023年，这些微交互变得更加精细和个性化。</p>
            <img src="https://images.unsplash.com/photo-1547658719-da2b51169166?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1364&q=80" alt="微交互示例">
            <p class="text-gray-700">研究表明，精心设计的微交互可以提高用户满意度达40%。例如，当用户完成一项任务时，一个简单的庆祝动画可以显著提升用户的成就感。我们看到的趋势是，这些微交互正在变得更加情境化和情感化。</p>
            
            <h2>2. 语音交互的普及</h2>
            <p class="text-gray-700">随着语音识别技术的成熟，语音交互已经从简单的命令执行发展为复杂的对话系统。2023年，超过60%的智能家居设备开始支持自然语言交互。</p>
            <img src="https://images.unsplash.com/photo-1563986768609-322da13575f3?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1470&q=80" alt="语音交互">
            <p class="text-gray-700">设计师面临的挑战是如何在无界面(Zero UI)的情况下创造流畅的体验。这需要深入理解用户的自然语言模式，并设计出能够处理模糊查询和上下文关联的系统。</p>
            
            <h2>3. 沉浸式体验的崛起</h2>
            <p class="text-gray-700">AR/VR技术的进步使得沉浸式体验不再是高端应用的专利。从零售到教育，各行各业都在探索如何利用沉浸式技术创造更有吸引力的体验。</p>
            <img src="https://images.unsplash.com/photo-1593508512255-86ab42a8e620?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1478&q=80" alt="沉浸式体验">
            <p class="text-gray-700">例如，家具零售商允许顾客通过AR预览家具在自己家中的效果，这种体验不仅提高了购买转化率，也减少了退货率。在教育领域，VR技术让学生能够"亲身"体验历史事件或科学现象，大大提升了学习效果。</p>
            
            <h2>4. 情感化设计的深化</h2>
            <p class="text-gray-700">2023年，设计师更加注重产品的情感连接。通过颜色、动画、微文案和个性化内容，产品能够更好地回应用户的情感状态。</p>
            <p class="text-gray-700">一个典型的例子是心理健康应用，它们使用温暖的颜色、鼓励的文案和平缓的动画来缓解用户的焦虑。另一个例子是健身应用，它们通过庆祝动画和社交分享功能来增强用户的成就感。</p>
            
            <h2>5. 无障碍设计的重视</h2>
            <p class="text-gray-700">随着对数字包容性的认识提高，无障碍设计从"可有可无"变成了"必不可少"。2023年，我们看到更多产品在设计之初就考虑到了各种能力用户的需求。</p>
            <img src="https://images.unsplash.com/photo-1551650975-87deedd944c3?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1374&q=80" alt="无障碍设计">
            <p class="text-gray-700">这不仅包括视觉障碍用户的屏幕阅读器支持，还包括为运动障碍用户设计的更大点击区域，为认知障碍用户简化的界面流程，以及为听力障碍用户提供的字幕和视觉提示。</p>
            
            <p class="text-gray-700 mt-8">交互设计正在经历一场深刻的变革，从关注功能实现转向关注用户体验的质量和深度。作为设计师，我们需要不断学习和适应这些变化，创造出既美观又实用的数字产品。2023年的这些趋势只是开始，未来的交互设计将更加智能、个性化和人性化。</p>
        </div>

        <!-- 文章标签 -->
        <div class="flex flex-wrap gap-2 mb-8">
            <span class="tag px-3 py-1 bg-gray-100 text-gray-800 text-sm rounded-full cursor-pointer hover:bg-indigo-100 hover:text-indigo-800 transition-all duration-300">#交互设计</span>
            <span class="tag px-3 py-1 bg-gray-100 text-gray-800 text-sm rounded-full cursor-pointer hover:bg-indigo-100 hover:text-indigo-800 transition-all duration-300">#用户体验</span>
            <span class="tag px-3 py-1 bg-gray-100 text-gray-800 text-sm rounded-full cursor-pointer hover:bg-indigo-100 hover:text-indigo-800 transition-all duration-300">#设计趋势</span>
            <span class="tag px-3 py-1 bg-gray-100 text-gray-800 text-sm rounded-full cursor-pointer hover:bg-indigo-100 hover:text-indigo-800 transition-all duration-300">#UI/UX</span>
            <span class="tag px-3 py-1 bg-gray-100 text-gray-800 text-sm rounded-full cursor-pointer hover:bg-indigo-100 hover:text-indigo-800 transition-all duration-300">#数字产品</span>
        </div>

        <!-- 互动区域 -->
        <div class="bg-white rounded-xl shadow-sm p-6 mb-8">
            <div class="flex items-center justify-between mb-6">
                <div class="flex items-center space-x-6">
                    <button id="likeBtn" class="like-btn flex items-center space-x-1 text-gray-500 hover:text-red-500 focus:outline-none transition-colors duration-300">
                        <i class="like-icon fas fa-heart text-lg transition-transform duration-300"></i>
                        <span id="likeCount" class="text-sm">248</span>
                    </button>
                    <button id="bookmarkBtn" class="bookmark-btn flex items-center space-x-1 text-gray-500 hover:text-yellow-500 focus:outline-none transition-colors duration-300">
                        <i class="bookmark-icon fas fa-bookmark text-lg transition-transform duration-300"></i>
                        <span id="bookmarkCount" class="text-sm">56</span>
                    </button>
                </div>
                <div class="flex items-center space-x-4">
                    <button class="flex items-center space-x-1 text-gray-500 hover:text-indigo-600">
                        <i class="fas fa-comment"></i>
                        <span class="text-sm">23条评论</span>
                    </button>
                    <button class="flex items-center space-x-1 text-gray-500 hover:text-indigo-600">
                        <i class="fas fa-share"></i>
                        <span class="text-sm">分享</span>
                    </button>
                </div>
            </div>
            
            <!-- 评论表单 -->
            <div class="mb-6">
                <div class="flex items-start space-x-3">
                    <img src="https://randomuser.me/api/portraits/men/32.jpg" alt="用户头像" class="w-10 h-10 rounded-full">
                    <div class="flex-1">
                        <textarea placeholder="写下你的评论..." class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 resize-none" rows="3"></textarea>
                        <div class="flex justify-end mt-2">
                            <button class="px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 transition-colors duration-300">发布评论</button>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- 评论列表 -->
            <div>
                <h3 class="text-lg font-medium text-gray-900 mb-4">热门评论</h3>
                
                <!-- 评论项 -->
                <div class="comment-item p-4 rounded-lg mb-4 transition-colors duration-300">
                    <div class="flex items-start space-x-3">
                        <img src="https://randomuser.me/api/portraits/women/22.jpg" alt="用户头像" class="w-10 h-10 rounded-full">
                        <div class="flex-1">
                            <div class="flex items-center justify-between mb-1">
                                <span class="font-medium text-gray-900">李思思</span>
                                <span class="text-xs text-gray-500">2小时前</span>
                            </div>
                            <p class="text-gray-700 mb-2">非常全面的趋势分析！特别是关于微交互的部分，我们团队最近也在研究如何通过微交互提升用户留存率。</p>
                            <div class="flex items-center space-x-4 text-sm text-gray-500">
                                <button class="hover:text-indigo-600 flex items-center space-x-1">
                                    <i class="fas fa-thumbs-up"></i>
                                    <span>12</span>
                                </button>
                                <button class="hover:text-indigo-600">回复</button>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- 评论项 -->
                <div class="comment-item p-4 rounded-lg mb-4 transition-colors duration-300">
                    <div class="flex items-start space-x-3">
                        <img src="https://randomuser.me/api/portraits/men/45.jpg" alt="用户头像" class="w-10 h-10 rounded-full">
                        <div class="flex-1">
                            <div class="flex items-center justify-between mb-1">
                                <span class="font-medium text-gray-900">王明远</span>
                                <span class="text-xs text-gray-500">5小时前</span>
                            </div>
                            <p class="text-gray-700 mb-2">关于语音交互的部分很有启发，我们正在开发一款语音助手，文章中提到的一些设计原则非常实用。</p>
                            <div class="flex items-center space-x-4 text-sm text-gray-500">
                                <button class="hover:text-indigo-600 flex items-center space-x-1">
                                    <i class="fas fa-thumbs-up"></i>
                                    <span>8</span>
                                </button>
                                <button class="hover:text-indigo-600">回复</button>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- 查看更多评论 -->
                <button class="w-full py-2 text-indigo-600 hover:bg-indigo-50 rounded-lg transition-colors duration-300">
                    <i class="fas fa-chevron-down mr-2"></i>查看更多评论
                </button>
            </div>
        </div>

        <!-- 作者信息 -->
        <div class="bg-white rounded-xl shadow-sm p-6 mb-8">
            <div class="flex flex-col md:flex-row">
                <div class="w-full md:w-1/3 flex flex-col items-center mb-6 md:mb-0">
                    <img src="https://randomuser.me/api/portraits/women/68.jpg" alt="作者头像" class="w-24 h-24 rounded-full cursor-pointer author-avatar transition-transform duration-300 mb-4">
                    <h3 class="text-xl font-bold text-gray-900 text-center">张雨薇</h3>
                    <p class="text-gray-600 text-center mb-4">资深UX设计师 | 交互设计专家</p>
                    <div class="flex flex-col space-y-2 w-full">
                        <button class="w-full px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 transition-colors duration-300">
                            <i class="fas fa-user-plus mr-2"></i>关注作者
                        </button>
                        <button class="w-full px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 transition-colors duration-300">
                            <i class="fas fa-envelope mr-2"></i>私信
                        </button>
                    </div>
                </div>
                <div class="w-full md:w-2/3 md:pl-6 md:border-l border-gray-200">
                    <h4 class="text-lg font-semibold text-gray-900 mb-3">关于作者</h4>
                    <p class="text-gray-700 mb-4">拥有5年UX设计经验，专注于数字产品交互设计。曾任职于多家知名互联网公司，主导过多个百万级用户产品的设计工作。</p>
                    <h4 class="text-lg font-semibold text-gray-900 mb-2">专业领域</h4>
                    <div class="flex flex-wrap gap-2">
                        <span class="bg-indigo-100 text-indigo-800 text-xs font-medium px-2.5 py-1 rounded">交互设计</span>
                        <span class="bg-indigo-100 text-indigo-800 text-xs font-medium px-2.5 py-1 rounded">用户研究</span>
                        <span class="bg-indigo-100 text-indigo-800 text-xs font-medium px-2.5 py-1 rounded">UI设计</span>
                        <span class="bg-indigo-100 text-indigo-800 text-xs font-medium px-2.5 py-1 rounded">产品策略</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- 相关文章 -->
        <div class="mb-8">
            <h3 class="text-xl font-bold text-gray-900 mb-6">相关推荐</h3>
            <div class="grid md:grid-cols-2 gap-6">
                <!-- 推荐文章1 -->
                <div class="bg-white rounded-xl shadow-sm overflow-hidden hover:shadow-md transition-shadow duration-300">
                    <img src="https://images.unsplash.com/photo-1551288049-bebda4e38f71?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1470&q=80" alt="文章封面" class="w-full h-40 object-cover">
                    <div class="p-4">
                        <span class="bg-indigo-100 text-indigo-800 text-xs font-medium px-2.5 py-0.5 rounded mb-2 inline-block">交互设计</span>
                        <h4 class="font-bold text-gray-900 mb-2">移动端交互设计的最佳实践</h4>
                        <p class="text-gray-600 text-sm mb-3">探索移动设备上最有效的交互模式和设计原则...</p>
                        <div class="flex items-center justify-between text-sm text-gray-500">
                            <span>8分钟阅读</span>
                            <span>2024年8月20日</span>
                        </div>
                    </div>
                </div>
                
                <!-- 推荐文章2 -->
                <div class="bg-white rounded-xl shadow-sm overflow-hidden hover:shadow-md transition-shadow duration-300">
                    <img src="https://images.unsplash.com/photo-1551650975-87deedd944c3?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1374&q=80" alt="文章封面" class="w-full h-40 object-cover">
                    <div class="p-4">
                        <span class="bg-indigo-100 text-indigo-800 text-xs font-medium px-2.5 py-0.5 rounded mb-2 inline-block">无障碍设计</span>
                        <h4 class="font-bold text-gray-900 mb-2">包容性设计：为所有人创造产品</h4>
                        <p class="text-gray-600 text-sm mb-3">了解如何设计出适合各种能力用户使用的数字产品...</p>
                        <div class="flex items-center justify-between text-sm text-gray-500">
                            <span>10分钟阅读</span>
                            <span>2023年4月15日</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- 返回主页按钮 -->
    <a href="../../index.html" class="fixed bottom-24 right-6 w-12 h-12 bg-primary dark:bg-primary-dark text-white rounded-full flex items-center justify-center shadow-lg z-50 hover:scale-110 transition-transform">
        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 12l2-2m0 0l7-7 7 7m-14 0l2 2m0 0l7 7 7-7m-14 0l2-2m0 0l7-7 7 7" />
        </svg>
    </a>

    <script src="../../scripts/component-loader.js"></script>
    <script>
        // 阅读进度条功能
        const progressBar = document.getElementById('progressBar');
        const readingProgress = () => {
            const scrollTop = document.documentElement.scrollTop || document.body.scrollTop;
            const scrollHeight = document.documentElement.scrollHeight || document.body.scrollHeight;
            const clientHeight = document.documentElement.clientHeight || window.innerHeight;
            const readableHeight = scrollHeight - clientHeight;
            const progress = scrollTop / readableHeight * 100;
            progressBar.style.width = progress + '%';
        };
        window.addEventListener('scroll', readingProgress);
        
        // 点赞功能
        const likeBtn = document.getElementById('likeBtn');
        const likeCount = document.getElementById('likeCount');
        let isLiked = false;
        
        likeBtn.addEventListener('click', () => {
            isLiked = !isLiked;
            likeBtn.classList.toggle('liked');
            likeCount.textContent = isLiked ? '249' : '248';
        });

        // 收藏功能
        const bookmarkBtn = document.getElementById('bookmarkBtn');
        const bookmarkCount = document.getElementById('bookmarkCount');
        // 使用sessionStorage存储收藏状态，避免返回页面时触发提示
        let articleId = new URLSearchParams(window.location.search).get('id') || '1';
        let storageKey = `article_${articleId}_bookmark`;
        let isBookmarked = sessionStorage.getItem(storageKey) === 'true';
        
        // 设置初始状态
        if (isBookmarked) {
            bookmarkBtn.classList.add('bookmarked');
            bookmarkCount.textContent = '57';
        }
        
        bookmarkBtn.addEventListener('click', () => {
            isBookmarked = !isBookmarked;
            // 存储到sessionStorage
            sessionStorage.setItem(storageKey, isBookmarked);
            
            bookmarkBtn.classList.toggle('bookmarked');
            bookmarkCount.textContent = isBookmarked ? '57' : '56';
            
            // 显示收藏提示
            if (isBookmarked) {
                showToast('文章已收藏', 'success');
            } else {
                showToast('已取消收藏', 'info');
            }
        });

        // 显示Toast提示
        function showToast(message, type) {
            const toast = document.createElement('div');
            toast.className = `fixed bottom-20 left-1/2 transform -translate-x-1/2 px-4 py-2 rounded-lg text-white ${
                type === 'success' ? 'bg-green-500' : 'bg-blue-500'
            } shadow-lg`;
            toast.textContent = message;
            document.body.appendChild(toast);
            
            setTimeout(() => {
                toast.classList.add('opacity-0', 'transition-opacity', 'duration-300');
                setTimeout(() => {
                    document.body.removeChild(toast);
                }, 300);
            }, 2000);
        }

        // 标签点击效果
        document.querySelectorAll('.tag').forEach(tag => {
            tag.addEventListener('click', function() {
                showToast(`正在搜索标签: ${this.textContent}`, 'info');
            });
        });

        // 作者头像点击效果
        document.querySelectorAll('.author-avatar').forEach(avatar => {
            avatar.addEventListener('click', function() {
                showToast('查看作者主页', 'info');
            });
        });

        // 评论功能实现
        // 创建评论存储键
        const commentStorageKey = `article_${articleId}_comments`;
        
        // 随机用户头像数组
        const userAvatars = [
            'https://randomuser.me/api/portraits/women/22.jpg',
            'https://randomuser.me/api/portraits/men/45.jpg',
            'https://randomuser.me/api/portraits/women/68.jpg',
            'https://randomuser.me/api/portraits/men/32.jpg',
            'https://randomuser.me/api/portraits/women/35.jpg',
            'https://randomuser.me/api/portraits/men/85.jpg'
        ];

        // 随机用户名数组
        const userNames = ['张明', '李芳', '王伟', '赵丽', '刘强', '陈静', '杨光', '周红'];
        
        // 获取评论列表容器
        const commentsContainer = document.querySelector('h3.text-lg.font-medium.text-gray-900.mb-4').nextElementSibling;
        
        // 获取评论数量显示元素
        const commentCountElement = document.querySelector('.fas.fa-comment').nextElementSibling;
        
        // 更新评论计数的函数
        function updateCommentCount() {
            const comments = JSON.parse(localStorage.getItem(commentStorageKey) || '[]');
            commentCountElement.textContent = `${comments.length}条评论`;
        }
        
        // 加载评论
        function loadComments() {
            if (!commentsContainer) {
                console.error('找不到评论容器元素');
                return;
            }
            
            const comments = JSON.parse(localStorage.getItem(commentStorageKey) || '[]');
            
            // 清空评论容器
            commentsContainer.innerHTML = '';
            
            // 更新评论计数
            updateCommentCount();
            
            if (comments.length === 0) {
                commentsContainer.innerHTML = '<div class="text-center p-4 text-gray-500">暂无评论，快来发表第一条评论吧！</div>';
                return;
            }
            
            // 添加评论到DOM
            comments.forEach(comment => {
                const commentElement = document.createElement('div');
                commentElement.className = 'comment-item p-4 rounded-lg mb-4 transition-colors duration-300';
                commentElement.innerHTML = `
                    <div class="flex items-start space-x-3">
                        <img src="${comment.avatar}" alt="用户头像" class="w-10 h-10 rounded-full">
                        <div class="flex-1">
                            <div class="flex items-center justify-between mb-1">
                                <span class="font-medium text-gray-900">${comment.username}</span>
                                <span class="text-xs text-gray-500">${comment.date}</span>
                            </div>
                            <p class="text-gray-700 mb-2">${comment.content}</p>
                            <div class="flex items-center space-x-4 text-sm text-gray-500">
                                <button class="hover:text-indigo-600 flex items-center space-x-1 comment-like" data-id="${comment.id}">
                                    <i class="fas fa-thumbs-up"></i>
                                    <span>${comment.likes}</span>
                                </button>
                                <button class="hover:text-indigo-600 reply-btn" data-username="${comment.username}">回复</button>
                            </div>
                        </div>
                    </div>
                `;
                commentsContainer.appendChild(commentElement);
            });
            
            // 添加评论点赞事件
            document.querySelectorAll('.comment-like').forEach(btn => {
                btn.addEventListener('click', function() {
                    const commentId = this.getAttribute('data-id');
                    const comments = JSON.parse(localStorage.getItem(commentStorageKey) || '[]');
                    const commentIndex = comments.findIndex(c => c.id === commentId);
                    
                    if (commentIndex !== -1) {
                        comments[commentIndex].likes++;
                        this.querySelector('span').textContent = comments[commentIndex].likes;
                        localStorage.setItem(commentStorageKey, JSON.stringify(comments));
                    }
                });
            });
            
            // 添加回复功能
            document.querySelectorAll('.reply-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    const username = this.getAttribute('data-username');
                    const textarea = document.querySelector('textarea[placeholder="写下你的评论..."]');
                    textarea.value = `@${username} `;
                    textarea.focus();
                    
                    // 滚动到评论框
                    textarea.scrollIntoView({ behavior: 'smooth' });
                });
            });
        }
        
        // 添加评论
        const commentForm = document.querySelector('textarea[placeholder="写下你的评论..."]').closest('div').querySelector('button');
        commentForm.addEventListener('click', function() {
            const textarea = document.querySelector('textarea[placeholder="写下你的评论..."]');
            const content = textarea.value.trim();
            
            if (content === '') {
                showToast('评论内容不能为空', 'error');
                return;
            }
            
            // 创建新评论对象
            const newComment = {
                id: Date.now().toString(),
                avatar: userAvatars[Math.floor(Math.random() * userAvatars.length)],
                username: userNames[Math.floor(Math.random() * userNames.length)],
                content: content,
                date: new Date().toLocaleDateString(),
                likes: 0
            };
            
            // 获取现有评论并添加新评论
            const comments = JSON.parse(localStorage.getItem(commentStorageKey) || '[]');
            comments.unshift(newComment); // 添加到开头
            
            // 保存到localStorage
            localStorage.setItem(commentStorageKey, JSON.stringify(comments));
            
            // 清空输入框
            textarea.value = '';
            
            // 重新加载评论
            loadComments();
            
            // 显示提示
            showToast('评论发表成功', 'success');
        });
        
        // 初始加载评论
        document.addEventListener('DOMContentLoaded', loadComments);
    </script>
</body>
</html>